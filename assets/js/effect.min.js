function initialiseSlider() {
    if (!$("body").hasClass("slider-loaded") && $("#slider-home").length) {
        sliderHome = new Swiper("#slider-home", {
            direction: "vertical",
            speed: 1500,
            wrapperClass: "slider-wrapper",
            slideClass: "slider-content",
            slideActiveClass: "slider-content-current",
            bulletClass: "nav-indication-item",
            bulletActiveClass: "nav-current",
            loop: !1,
            keyboardControl: !0,
            mousewheelControl: !0,
            grabCursor: !0,
            pagination: ".nav-indication-nb",
            paginationClickable: !1,
            paginationBulletRender: function (e, t, o) {
                return '<div class="nav-indication-item ' + o + '">' + (t + 1) + "</div>"
            },
            onInit: function (e) {
                $("body").addClass("slider-loaded"), $("html").removeClass("no-slider"), $("body").removeClass("no-slider")
            },
            onSlideChangeStart: function (e) {
                $("body").removeClass("slider-home-active"), $(".slider-content").removeClass("slider-content-change-step2"), setTimeout(function () {
                    $(".slider-content").removeClass("slider-content-change-step1")
                }, 200), 6 != e.activeIndex && $("body").removeClass("download-digital-step1")
            },
            onSlideChangeEnd: function (e) {
                0 == e.activeIndex && ($("body").addClass("slider-home-active"), $("#slider-content-home").addClass("slider-content-change-step1"), setTimeout(function () {
                    $("#slider-content-home").addClass("slider-content-change-step2")
                }, 500)), 1 == e.activeIndex && ($("#slider-content-chapter-1").addClass("slider-content-change-step1"), setTimeout(function () {
                    $("#slider-content-chapter-1").addClass("slider-content-change-step2")
                }, 500)), 2 == e.activeIndex && ($("#slider-content-chapter-2").addClass("slider-content-change-step1"), setTimeout(function () {
                    $("#slider-content-chapter-2").addClass("slider-content-change-step2")
                }, 500)), 3 == e.activeIndex && ($("#slider-content-chapter-3").addClass("slider-content-change-step1"), setTimeout(function () {
                    $("#slider-content-chapter-3").addClass("slider-content-change-step2")
                }, 500)), 4 == e.activeIndex && ($("#slider-content-chapter-4").addClass("slider-content-change-step1"), setTimeout(function () {
                    $("#slider-content-chapter-4").addClass("slider-content-change-step2")
                }, 500)), 5 == e.activeIndex && ($("#slider-content-chapter-5").addClass("slider-content-change-step1"), setTimeout(function () {
                    $("#slider-content-chapter-5").addClass("slider-content-change-step2")
                }, 500)), 6 == e.activeIndex && ($("#slider-content-end").addClass("slider-content-change-step1"), setTimeout(function () {
                    $("#slider-content-end").addClass("slider-content-change-step2")
                }, 500))
            }
        }), setTimeout(function () {
            nbtotalsliderhome = $(".nav-indication-nb").find(".nav-indication-item").length, $(".nav-indication-total").html(nbtotalsliderhome)
        }, 800);
        var e = new Swiper("#slider-home-nav", {
            speed: 1500,
            wrapperClass: "slider-home-nav-wrapper",
            slideClass: "slide-nav-item",
            bulletClass: "nav-item",
            bulletActiveClass: "nav-item-active",
            grabCursor: !1,
            pagination: ".nav",
            paginationClickable: !0,
            paginationBulletRender: function (e, t, o) {
                return '<li class="nav-item"><div class="nav-bar-container"><div class="nav-bar bg-grey center-vertical"></div><div class="nav-bar-hover bg-corporate-1 center-vertical"></div></div><span class="nav-title"></span></li>'
            }
        });
        sliderHome.params.control = e, e.params.control = sliderHome, $(".go-home").on("click", function (e) {
            e.preventDefault(), sliderHome.slideTo(0, 500, !0)
        }), $(".slide-to-2").on("click", function (e) {
            e.preventDefault(), sliderHome.slideTo(1, 1e3, !0)
        }), $(".slide-to-7").on("click", function (e) {
            e.preventDefault(), sliderHome.slideTo(6, 1e3, !0)
        })
    }
}

function removeSlider() {
    clearTimeout(SliderRemoveTimeout), SliderRemoveTimeout = setTimeout(function () {
        sliderHome.destroy(), $("body").removeClass("slider-loaded")
    }, 500)
}

function OpenMenu() {
    $("html, body").animate({
        scrollTop: 0
    }, 500), $("body").addClass("menu-opened-step1"), setTimeout(function () {
        $("body").addClass("menu-opened-step2")
    }, 100), setTimeout(function () {
        $("body").addClass("menu-opened-step3")
    }, 500), setTimeout(function () {
        $("body").addClass("menu-opened-step4")
    }, 800)
}

function CloseMenu() {
    $("body").removeClass("menu-opened-step4"), $("body").removeClass("menu-opened-step3"), setTimeout(function () {
        $("body").removeClass("menu-opened-step2")
    }, 400), setTimeout(function () {
        $("body").removeClass("menu-opened-step1")
    }, 1300)
}

function CloseAuthor() {
    setTimeout(function () {
        $("body").removeClass("author-opened-step4"), $("body").removeClass("author-opened-step3")
    }, 500), setTimeout(function () {
        $("body").removeClass("author-opened-step2")
    }, 800), setTimeout(function () {
        $("html, body").removeClass("author-opened-step1")
    }, 2800)
}

function ChangePage() {
    $("body").addClass("page-transition-step1"), setTimeout(function () {
        $("body").addClass("page-transition-step2")
    }, 10), setTimeout(function () {
        CloseMenu()
    }, 1500), setTimeout(function () {
        window.location.href = $thislink.attr("href")
    }, 1500), setTimeout(function () {
        $("body").removeClass("page-transition-step2")
    }, 5500), setTimeout(function () {
        $("body").removeClass("page-transition-step1")
    }, 6500)
}

function sceneParallax() {
    if ($(".scene-parallax").length) {
        var e = $(".scene-parallax");
        (resize = function () {
            e[0].style.width = window.innerWidth + "px", e[0].style.height = window.innerHeight + "px"
        })(), window.onresize = _.debounce(resize, 200), window.onscroll = _.debounce(resize, 200), e.parallax()
    }
}

function onScroll() {
    $(".scroll-anim").length && $(".scroll-anim").each(function (e) {
        $(this).scrollTop() + $(this).offset().top < $(window).scrollTop() + $(window).height() ? $(this).addClass("scroll-anim-active") : $(this).removeClass("scroll-anim-active")
    }), $(".scroll-anim-fast").length && $(".scroll-anim-fast").each(function (e) {
        $(this).scrollTop() + $(this).offset().top < $(window).scrollTop() + $(window).height() + 100 ? $(this).addClass("scroll-anim-active") : $(this).removeClass("scroll-anim-active")
    })
}

function fitAll() {
    windoww = $(window).width(), windowh = $(window).height(), $("body#emersion").length && (810 > windoww || 600 > windowh ? ($("body").hasClass("slider-loaded") && removeSlider(), $("html").addClass("no-slider"), $("body").addClass("no-slider"), $(".slide-to-2").on("click", function (e) {
        e.preventDefault(), $("html, body").animate({
            scrollTop: $("#slider-content-chapter-1").offset().top
        }, 400)
    }), $(".slide-to-7").on("click", function (e) {
        e.preventDefault(), $("html, body").animate({
            scrollTop: $("#slider-content-end").offset().top
        }, 400)
    })) : initialiseSlider()), $("#download-book-wrapper").length && (downloadbookh = windowh / 2.2, $("#download-book-wrapper").css("height", downloadbookh)), $("#shop-wrapper").length && (setTimeout(function () {
        shoph = $("#shop-wrapper").height(), shopcontenth = $("#shop-align > .row").height()
    }, 500), setTimeout(function () {
        shopcontenth + 180 > windowh ? $("#shop-wrapper").addClass("big-height") : $("#shop-wrapper").removeClass("big-height")
    }, 550))
}

function fitIndiceScroll() {
    $("#shop-wrapper").length && (setTimeout(function () {
        shoph = $("#shop-wrapper").height(), shopcontenth = $("#shop-align > .row").height()
    }, 350), setTimeout(function () {
        shopcontenth + 180 > windowh ? $("#indice-scroll").hide() : $("#indice-scroll").show()
    }, 400))
}
var windoww = 0,
    windowh = 0,
    nbtotalsliderhome = 0,
    downloadbookh = 0,
    shoph = 0,
    shopcontenth = 0,
    calculateh = 0,
    introh = 0,
    madefortitleminh = 0,
    madeforheaderh = 0,
    madefortexth = 0,
    sliderHome = null,
    SliderRemoveTimeout = null;
$(window).on("load", function () {
    $("body:not(#emersion)").addClass("page-loading-step1"), setTimeout(function () {
        $("body:not(#emersion)").addClass("page-loading-step2")
    }, 400), setTimeout(function () {
        $("body:not(#emersion)").addClass("page-loading-step3")
    }, 800)
    /*, setTimeout(function () {
        $("body:not(#emersion)").addClass("page-loading-step4"), $("#video-parallax-1 video")[0].play(), $("#video-parallax-2 video")[0].play(), $("#video-parallax-3 video")[0].play(), $("#video-parallax-4 video")[0].play(), $("#video-parallax-5 video")[0].play()
    }, 1200)*/
    var Timer = setInterval(function(){
        var now = new Date()
        var yes = new Date('2015/06/18 11:17:22')
        var hours = parseInt(now - yes) / 1000 / 3600
        $('#download-price').html(hours)
    },1)
    
}), $(document).ready(function () {
    if ($(window).on("resize", function () {
            fitAll(), fitIndiceScroll()
        }), fitAll(), fitIndiceScroll(), $(".edd_terms_links").on("click", function () {
            fitIndiceScroll()
        }), $(window).on("scroll", function () {
            onScroll()
        }), onScroll(), $("#loading-text").length) {
        new Typed("#loading-text", {
            stringsElement: "#loading-text-strings",
            typeSpeed: 60,
            startDelay: 2e3,
            loop: !1,
            onComplete: function (e, t) {
                $("body").addClass("page-loading-step1"), setTimeout(function () {
                    $("body").addClass("page-loading-step2")
                }, 1400), setTimeout(function () {
                    $("body").addClass("page-loading-step3")
                }, 1800), setTimeout(function () {
                    $("body").addClass("page-loading-step4"), $("#slider-home").length && ($("body").addClass("slider-home-active"), $("#slider-content-home").addClass("slider-content-change-step1"), setTimeout(function () {
                        $("#slider-content-home").addClass("slider-content-change-step2")
                    }, 500))
                }, 2400)
            }
        })
    }
    if (sceneParallax(), $(".btn-download-digital").on("click", function (e) {
            $("body").addClass("download-digital-step1"), e.preventDefault()
        }), $(".open-menu").on("click", function () {
            OpenMenu()
        }), $(".close-menu").on("click", function (e) {
            CloseMenu(), e.preventDefault()
        }), $("body").on("click", ".change-page", function (e) {
            $thislink = $(this), ChangePage(), e.preventDefault()
        }), $("body").on("click", ".go-home", function (e) {
            $("body#emersion").length ? (e.preventDefault(), CloseMenu(), CloseAuthor()) : ($("body").addClass("go-home-step1"), $thislink = $(this), ChangePage(), e.preventDefault(), setTimeout(function () {
                $("body").removeClass("go-home-step1")
            }, 4e3))
        }), $("body#buy").on("click", ".slide-to-bottom", function (e) {
            $("html, body").animate({
                scrollTop: shoph
            }, 1e3), e.preventDefault()
        }), $(".open-author").on("click", function (e) {
            e.preventDefault(), $("body#author").length ? (CloseMenu(), CloseAuthor()) : ($("#author-wrapper").load("/?page_id=45 #author-wrapper > *"), $("html, body").addClass("author-opened-step1"), setTimeout(function () {
                $("body").addClass("author-opened-step2")
            }, 100), setTimeout(function () {
                OpenMenu()
            }, 300), $(document).ajaxComplete(function () {
                setTimeout(function () {
                    $("body").addClass("author-opened-step3"), sceneParallax()
                }, 400), setTimeout(function () {
                    $("body").addClass("author-opened-step4")
                }, 900)
            }))
        }), $(".close-author").on("click", function (e) {
            e.preventDefault(), CloseMenu(), CloseAuthor()
        }), $(".open-modal").on("click", function (e) {
            e.preventDefault(), $("body").addClass("modal-open-step1"), setTimeout(function () {
                $("body").addClass("modal-open-step2")
            }, 100), setTimeout(function () {
                $("body").addClass("modal-open-step3")
            }, 700)
        }), $(".open-modal-emersion-print").on("click", function () {
            $("body").addClass("modalbookprint-open-step1"), Modernizr.touch || $("#modal-book-print .mailpoet_text").length && $("#modal-book-print .mailpoet_text").focus()
        }), $(".close-modal").on("click", function (e) {
            e.preventDefault(), $("body").removeClass("modal-open-step3"), setTimeout(function () {
                $("body").removeClass("modal-open-step2")
            }, 300), setTimeout(function () {
                $("body").removeClass("modal-open-step1"), $("body").removeClass("modalbookprint-open-step1")
            }, 1300)
        }), ($(".row-form").length || $(".mailpoet_form").length) && ($("div.mailpoet_form").addClass("row-form"), $('.row-form input[type="text"], .row-form textarea, .mailpoet_form input[type="text"], .mailpoet_form textarea').each(function () {
            $thiselem = $(this), "" == $thiselem.val() ? $thiselem.parent().removeClass("focus-label") : $thiselem.parent().addClass("focus-label")
        }), $(".row-form input, .row-form textarea, .mailpoet_form input, .mailpoet_form textarea").on("focusin", function () {
            $(this).parent().addClass("focus-label")
        }), $(".row-form input, .row-form textarea, .mailpoet_form input, .mailpoet_form textarea").on("focusout", function () {
            "" == $(this).val() && $(this).parent().removeClass("focus-label")
        })), $("#edd_checkout_wrap .edd_empty_cart").length ? $("html").addClass("html-panier-vide") : $("html").removeClass("html-panier-vide"), $("#book-info #edd_purchase_receipt + h3").length) {
        var e = $("#book-info #edd_purchase_receipt + h3").text().replace("Produits", "Téléchargements");
        $("#book-info #edd_purchase_receipt + h3").text(e)
    }
    if ($("#edd_purchase_receipt").length) {
        var t = $("#edd_purchase_receipt th:first-child").text().replace(":", "");
        $("#edd_purchase_receipt th:first-child").text(t);
        var o = $("#edd_purchase_receipt tr:nth-child(1) td:first-child").text().replace(":", "");
        $("#edd_purchase_receipt tr:nth-child(1) td:first-child").text(o);
        var n = $("#edd_purchase_receipt tr:nth-child(2) td:first-child").text().replace(":", "");
        $("#edd_purchase_receipt tr:nth-child(2) td:first-child").text(n);
        var i = $("#edd_purchase_receipt tr:nth-child(3) td:first-child").text().replace(":", "");
        $("#edd_purchase_receipt tr:nth-child(3) td:first-child").text(i);
        var s = $("#edd_purchase_receipt tr:nth-child(4) td:first-child").text().replace(":", "");
        $("#edd_purchase_receipt tr:nth-child(4) td:first-child").text(s);
        var a = $("#edd_purchase_receipt tr:nth-child(5) td:first-child").text().replace(":", "");
        $("#edd_purchase_receipt tr:nth-child(5) td:first-child").text(a)
    }
});